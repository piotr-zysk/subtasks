<mat-accordion>

    <mat-expansion-panel *ngFor="let taskId of tasks.ids">
      <mat-expansion-panel-header>
        <mat-panel-title>
            <mat-checkbox appStopEventPropagation id="task{{taskId}}" (click)="processSubtasks(taskId)"
            [(ngModel)]="tasks.entities[taskId].done">{{tasks.entities[taskId].title}}</mat-checkbox>
        </mat-panel-title>
      </mat-expansion-panel-header>

    <mat-panel-description>
      edit // toggle edit mode (add subtasks, edit all titles)
    </mat-panel-description>


    <div *ngFor="let item of tasks.entities[taskId].items; let i2 = index">
      <mat-checkbox [(ngModel)]="item.done">{{item.title}}</mat-checkbox>
    </div>

  </mat-expansion-panel>


  <mat-expansion-panel>
    <mat-expansion-panel-header>
      <mat-panel-title>
        + new task
      </mat-panel-title>
    </mat-expansion-panel-header>

  </mat-expansion-panel>

</mat-accordion>

